{"version":3,"sources":["wx_wrapper.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,2EAA2E;AAC3E,gHAAgH;AAChH,mBAAmB;AACnB,qFAAqF;AACrF,0HAA0H;AAC1H,8BAA8B;AAC9B,qFAAqF;AACrF,0HAA0H;;AAEpH,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAgC,8BAAY;IAExC;eACI,iBAAO;IACX,CAAC;IAED,yBAAI,GAAJ;QACI,IAAI,IAAI,GAAG,IAAI,CAAA;QACf,EAAE,CAAC,KAAK,CAAC;YACL,OAAO,EAAE;gBACL,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC5B,CAAC;SACJ,CAAC,CAAA;IACN,CAAC;IAED,qCAAgB,GAAhB;QACI,IAAI,IAAI,GAAG,IAAI,CAAA;QACf,EAAE,CAAC,WAAW,CAAC;YACX,OAAO,EAAE,UAAS,GAAG;gBACjB,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,CAAC;YACvC,CAAC;YACD,IAAI,EAAE,UAAS,GAAG;gBACd,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC;YACtC,CAAC;SACJ,CAAC,CAAC;QACH,EAAE,CAAC,iBAAiB,CAAC;YACjB,MAAM,CAAC;gBACH,OAAO,EAAE,IAAI;gBACb,UAAU,EAAE,+CAA+C;aAC9D,CAAC;QACN,CAAC,CAAC,CAAA;QACF,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;IACpC,CAAC;IAED,6CAAwB,GAAxB,UAAyB,GAAG;QACxB,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,EAAE,CAAC,aAAa,CAAC;YACb,OAAO,EAAE;gBACL,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC5B,CAAC;YACD,IAAI,EAAE;gBACF,IAAI,CAAC,eAAe,EAAE,CAAC;YAC3B,CAAC;YACD,QAAQ,EAAE;gBACN,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC7B,CAAC;SACJ,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;QACrC,iCAAiC;QACjC,8BAA8B;QAC9B,oCAAoC;QACpC,kGAAkG;QAClG,0FAA0F;IAC9F,CAAC;IAED,4CAAuB,GAAvB,UAAwB,GAAG;QACvB,2BAA2B;QAC3B,mDAAmD;QACnD,0FAA0F;QAC1F,qBAAqB;QACrB,IAAI;QACJ,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,EAAE,CAAC,aAAa,CAAC;YACb,OAAO,EAAE;gBACL,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC5B,CAAC;YACD,IAAI,EAAE;gBACF,IAAI,CAAC,eAAe,EAAE,CAAC;YAC3B,CAAC;YACD,QAAQ,EAAE;gBACN,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC7B,CAAC;SACJ,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAA;IACxC,CAAC;IAED,qCAAgB,GAAhB;QACI,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;IACpC,CAAC;IAED,oCAAe,GAAf;QACI,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;IACnC,CAAC;IAED,sCAAiB,GAAjB;QACI,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IACrC,CAAC;IAtFQ,UAAU;QADtB,OAAO;OACK,UAAU,CAuFtB;IAAD,iBAAC;CAvFD,AAuFC,CAvF+B,EAAE,CAAC,SAAS,GAuF3C;AAvFY,gCAAU;AAyFvB,IAAI,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;AAC9B,kBAAe,MAAM,CAAC","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\logic","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class wx_wrapper extends cc.Component {\r\n\r\n    constructor() {\r\n        super();\r\n    },\r\n\r\n    init(): void {\r\n        var self = this\r\n        wx.login({\r\n            success: function () {\r\n                self.on_login_success();\r\n            }\r\n        })\r\n    },\r\n\r\n    on_login_success(): void {\r\n        var self = this\r\n        wx.getUserInfo({\r\n            success: function(res) {\r\n                self.on_get_user_info_success(res);\r\n            },            \r\n            fail: function(res) {\r\n                self.on_get_user_info_failed(res);\r\n            }\r\n        });\r\n        wx.onShareAppMessage(function() {\r\n            return {\r\n                \"title\": \"扫雷\",\r\n                \"imageUrl\": \"res/raw-assets/resource/texture/share_img.png\",\r\n            };\r\n        })\r\n        console.log(\"on login success\");\r\n    },\r\n\r\n    on_get_user_info_success(res): void {\r\n        var self = this;\r\n        wx.showShareMenu({\r\n            success: function() {\r\n                self.on_share_success();\r\n            },\r\n            fail: function() {\r\n                self.on_share_failed();\r\n            },\r\n            complete: function() {\r\n                self.on_share_complete();\r\n            }\r\n        });\r\n        console.log(\"get user info success\");\r\n        // self.has_get_user_info = true;\r\n        // var userInfo = res.userInfo\r\n        // this.nickname = userInfo.nickName\r\n        // console.log(\"get user info success, nick name %s, url %s, gender %d, province %s, open id %s\", \r\n        // this.nickname, userInfo.avatarUrl, userInfo.gender, userInfo.province, userInfo.openId)\r\n    },\r\n\r\n    on_get_user_info_failed(res): void {\r\n        // this.nickname = \"failed\"\r\n        // // iOS 和 Android 对于拒绝授权的回调 errMsg 没有统一，需要做一下兼容处理\r\n        // if (res.errMsg.indexOf('auth deny') > -1 || \tres.errMsg.indexOf('auth denied') > -1 ) {\r\n        //     // 处理用户拒绝授权的情况\r\n        // }\r\n        var self = this;\r\n        wx.showShareMenu({\r\n            success: function() {\r\n                self.on_share_success();\r\n            },\r\n            fail: function() {\r\n                self.on_share_failed();\r\n            },\r\n            complete: function() {\r\n                self.on_share_complete();\r\n            }\r\n        });\r\n        console.log(\"get user info failed!\")\r\n    },\r\n\r\n    on_share_success(): void {\r\n        console.log(\"on share success\");\r\n    },\r\n\r\n    on_share_failed(): void {\r\n        console.log(\"on share failed\");\r\n    },\r\n\r\n    on_share_complete(): void {\r\n        console.log(\"on share complete\");\r\n    },\r\n}\r\n\r\nvar wx_mgr = new wx_wrapper();\r\nexport default wx_mgr;\r\n"]}